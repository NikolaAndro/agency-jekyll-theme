---
layout: kitchen_default
lang: eng
---

<div class="mealplan_generator_container" id="mealplan-page">
    <h1>Meal Plan Generator</h1>
    
    <h2 style="text-align: left; font-weight: bold; margin-bottom: 20px;">STEP 1 :  Enter your daily macronutrient goals:</h2>

    <form id="macro-form">
        <div style="margin-bottom: 20px; display: flex; align-items: flex-start; min-width: 750px;">
            <div style="display: flex; align-items: center; margin-right: 20px;">
                <label for="protein" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" style="font-size: 14px; width: 100px; margin-right: 10px;">Protein (g):</label>
                <input type="number" id="protein" name="protein" aria-describedby="protein-helper" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px; width: 100px;">
            </div>
            <div style="display: flex; align-items: center; margin-right: 20px;">
                <label for="carbs" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" style="font-size: 14px; width: 100px; margin-right: 10px;">Carbs (g):</label>
                <input type="number" id="carbs" name="carbs" aria-describedby="carbs-helper" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px; width: 100px;">
            </div>
            <div style="display: flex; align-items: center;">
                <label for="fat" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" style="font-size: 14px; width: 100px; margin-right: 10px;">Fat (g):</label>
                <input type="number" id="fat" name="fat" aria-describedby="fat-helper" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px; width: 100px;">
            </div>
        </div>
        <div style="margin-bottom: 20px; display: flex; align-items: center; justify-content: center; max-width: 500px; margin: 0 auto;">
            <label for="calories" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" style="font-size: 14px; margin-right: 20px;">Total Calories:</label>
            <input type="number" id="calories" name="calories" aria-describedby="calories-helper" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px;">
            <label for="meals" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white" style="font-size: 14px; margin-left: 20px; margin-right: 10px;">Number of meals:</label>
            <input type="number" id="meals" name="meals" aria-describedby="meals-helper" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px;">
        </div>
        <div style="display: flex; justify-content: center; ">
            <button type="submit" class="mt-4 bg-blue-500 text-white rounded-lg p-2.5" style="font-size: 14px; margin-bottom: 50px; width: 200px; margin-top: 30px; background-color: #fed136;">Next</button>
        </div>
    </form>

    <!-- Section that displays all meals for breakfast, lunchm dinner, and snacks -->
    <div id="meal-selections">
        <h2 style="text-align: left; font-weight: bold; margin-bottom: 20px;">STEP 2 : Select your meals:</h2>
        <div class="meal-category">
            <h3>Breakfast</h3>
            <div class="meal-options" id="breakfast-options">
                <!-- Breakfast meal options will be dynamically added here -->
            </div>
        </div>
        <div class="meal-category">
            <h3>Lunch</h3>
            <div class="meal-options" id="lunch-options">
                <!-- Lunch meal options will be dynamically added here -->
            </div>
        </div>
        <div class="meal-category">
            <h3>Dinner</h3>
            <div class="meal-options" id="dinner-options">
                <!-- Dinner meal options will be dynamically added here -->
            </div>
        </div>
        <div class="meal-category">
            <h3>Snacks</h3>
            <div class="meal-options" id="snack-options">
                <!-- Snack meal options will be dynamically added here -->
            </div>
        </div>
    </div>

    <div id="meal-sections" style="display:none;"></div>

    <div id="summary">
        <h2>Selected Meals</h2>
        <table id="selected-meals">
            <thead>
                <tr>
                    <th>Meal</th>
                    <th>Food</th>
                    <th>Protein</th>
                    <th>Carbs</th>
                    <th>Fat</th>
                    <th>Calories</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div id="totals">
            <p>Total Protein: <span id="total-protein">0</span>g</p>
            <p>Total Carbs: <span id="total-carbs">0</span>g</p>
            <p>Total Fat: <span id="total-fat">0</span>g</p>
            <p>Total Calories: <span id="total-calories">0</span></p>
        </div>
    </div>

    <div id="mealModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="mealName"></h2>
            <p id="mealDescription"></p>
        </div>
    </div>

    <div id="quantityModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Enter Quantity</h2>
            <div style="margin-bottom: 10px; display: flex; align-items: center; justify-content: center; max-width: 300px; margin: 0 auto;">
                <input type="number" id="quantityInput" min="1" value="1" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required style="font-size: 14px; margin-right: 10px;">
                <button id="quantitySubmit" class="bg-blue-500 text-white rounded-lg p-2.5" style="font-size: 14px; width: 100px; background-color: #fed136; margin-left: 20px;">Add</button>
            </div>
        </div>
    </div>

</div>
<!-- <script src="script.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        fetch('../foods.yaml')
            .then(response => response.text())
            .then(data => {
                const foods = jsyaml.load(data).foods;
                displayFoods(foods);
            });

        function displayFoods(foods) {
            for (const [meal, items] of Object.entries(foods)) {
                const mealOptions = document.getElementById(`${meal}-options`);
                items.forEach(item => {
                    const foodDiv = document.createElement('div');
                    foodDiv.className = 'food-option';
                    foodDiv.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <button class="description-button" data-name="${item.name}" data-description="${item.description}">View Description</button>
                        <p>${item.name}</p>
                        <div class="macros">
                            <p>Protein: ${item.protein} g</p>
                            <p>Carbs: ${item.carbs} g</p>
                            <p>Fat: ${item.fat} g</p>
                            <p class="calories">Calories: ${item.calories} kcal</p>
                        </div>
                    `;
                    mealOptions.appendChild(foodDiv);

                    // Add click event listener to the button
                    foodDiv.querySelector('.description-button').addEventListener('click', function() {
                        showModal(this.dataset.name, this.dataset.description);
                    });

                    // Add click event listener to the image
                    foodDiv.querySelector('img').addEventListener('click', function() {
                        showQuantityModal(foodDiv);
                    });
                });
            }
        }

        function showModal(name, description) {
            const modal = document.getElementById('mealModal');
            document.getElementById('mealName').textContent = name;
            document.getElementById('mealDescription').textContent = description;
            modal.style.display = 'block';
        }

        function showQuantityModal(foodDiv) {
            const modal = document.getElementById('quantityModal');
            modal.style.display = 'block';

            // Handle quantity submission
            document.getElementById('quantitySubmit').onclick = function() {
                const quantity = document.getElementById('quantityInput').value;
                foodDiv.classList.add('selected');
                foodDiv.querySelector('img').classList.add('selected');
                let quantityLabel = foodDiv.querySelector('.quantity-label');
                if (!quantityLabel) {
                    quantityLabel = document.createElement('div');
                    quantityLabel.className = 'quantity-label';
                    foodDiv.insertBefore(quantityLabel, foodDiv.firstChild);
                }
                quantityLabel.textContent = `Quantity: ${quantity}`;

                // Create and insert the deselect button
                let deselectButton = foodDiv.querySelector('.deselect-button');
                if (!deselectButton) {
                    deselectButton = document.createElement('button');
                    deselectButton.className = 'deselect-button';
                    deselectButton.textContent = 'Deselect';
                    foodDiv.insertBefore(deselectButton, quantityLabel.nextSibling);
                }

                // Add click event listener to the deselect button
                deselectButton.addEventListener('click', function() {
                    foodDiv.classList.remove('selected');
                    foodDiv.querySelector('img').classList.remove('selected');
                    if (quantityLabel) {
                        quantityLabel.remove();
                    }
                    if (deselectButton) {
                        deselectButton.remove();
                    }
                });

                modal.style.display = 'none';
            };
        }

        // Close the modal
        document.querySelectorAll('.modal .close').forEach(closeBtn => {
            closeBtn.addEventListener('click', function() {
                this.closest('.modal').style.display = 'none';
            });
        });

        // Close the modal when clicking outside of it
        window.addEventListener('click', function(event) {
            const quantityModal = document.getElementById('quantityModal');
            const mealModal = document.getElementById('mealModal');
            if (event.target === quantityModal || event.target === mealModal) {
                event.target.style.display = 'none';
            }
        });
    });
</script>